{{ define "main" }}

<section class="section">
  <div class="container">
    <h1 class="title has-text-centered" style="margin-bottom: 3rem;">
      お問合せフォーム
    </h1>
    <form name="contact" method="POST" action="/thankyou" data-netlify-recaptcha="true" data-netlify="true">
      <div id="box" class="box column is-8 is-offset-2" style="min-width: 328px;">
        <div class="field">
          <label class="label">名前</label>
          <div class="control has-icons-left has-icons-right">
            <input name="name" class="input" type="text" placeholder="名前を入力してください" required />
            <span class="icon is-small is-left">
              <i class="fas fa-user"></i>
            </span>
          </div>
        </div>

        <div class="field">
          <label class="label">メールアドレス</label>
          <div class="control has-icons-left has-icons-right">
            <input name="email" class="input" type="email" placeholder="メールアドレスを入力してください" required />
            <span class="icon is-small is-left">
              <i class="fas fa-envelope"></i>
            </span>
          </div>
        </div>

        <div class="field">
          <label class="label">メッセージ</label>
          <div class="control">
            <textarea name="message" class="textarea" placeholder="お問い合わせ内容を入力してください" required></textarea>
          </div>
        </div>

        <div class="field">
          <div id="recaptcha" style="margin: auto;">
            <div data-netlify-recaptcha="true"></div>
          </div>
        </div>

      </div>

      <div class="has-text-centered" style="margin-top: 2rem;">
        <button class="button is-link is-outlined" type="submit">送信</button>
      </div>

    </form>
    {{ .Content }}
  </div>
</section>

{{ end }}

{{ define "addscript" }}
<script>

  function reCAPTCHA_Sizer() {
    const recaptcha = document.getElementsById('recaptcha');
    const recaptcha_width = 304;
    const recaptcha_height = 78;
    const margin_width = 72
    let body_width = document.body.clientWidth;
    let recaptcha_ratio = (body_width - margin_width) / recaptcha_width;
    let field_height = recaptcha_height * recaptcha_ratio;
    if (field_width < recaptcha_width) {
      recaptcha.style.transform = 'scale(' + recaptcha_ratio + ')';
      recaptcha.style.height = field_height
    } else {
      recaptcha.style.transform = 'scale(1)';
      recaptcha.style.height = recaptcha_height
    }
  }

  window.onresize = function () {
    reCAPTCHA_Sizer();
  };

</script>
{{ end }}